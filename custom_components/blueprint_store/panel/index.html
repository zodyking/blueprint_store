<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Blueprint Browser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* ---- Theme -------------------------------------------------------- */
      :root {
        --bg: #f7f7fb;
        --text: #0f172a;
        --muted: #64748b;
        --card: #ffffff;
        --border: #e5e7eb;
        --brand: #2563eb;
        --brand-2: #7c3aed;
        --radius: 16px;
        --pad: 18px;
        --shadow: 0 10px 30px rgba(16, 24, 40, 0.08);
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0b1220;
          --text: #e5e7eb;
          --muted: #94a3b8;
          --card: #0e1729;
          --border: #1f2a44;
          --brand: #60a5fa;
          --brand-2: #a78bfa;
          --shadow: 0 10px 30px rgba(0,0,0,0.45);
        }
      }

      /* ---- Layout ------------------------------------------------------- */
      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu;
        background: radial-gradient(1200px 1200px at 100% -200px, rgba(124,58,237,0.12), transparent 60%),
                    radial-gradient(1200px 1200px at -100% 200px, rgba(37,99,235,0.12), transparent 60%),
                    var(--bg);
        color: var(--text);
      }

      header {
        position: sticky; top: 0; z-index: 10;
        backdrop-filter: blur(10px);
        background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.75));
        border-bottom: 1px solid var(--border);
        padding: 12px var(--pad);
      }
      @media (prefers-color-scheme: dark) {
        header { background: linear-gradient(180deg, rgba(15,23,42,0.75), rgba(15,23,42,0.65)); }
      }

      .toolbar {
        max-width: 1100px; margin: 0 auto; display: grid;
        grid-template-columns: 1fr auto auto; gap: 12px; align-items: center;
      }

      .search {
        display: flex; gap: 10px; align-items: center; background: var(--card);
        border: 1px solid var(--border); border-radius: 999px; padding: 10px 14px; box-shadow: var(--shadow);
      }
      .search input[type="search"] {
        flex: 1; border: 0; outline: 0; background: transparent; color: var(--text); font-size: 16px;
      }

      select, button {
        appearance: none; border: 1px solid var(--border); background: var(--card); color: var(--text);
        padding: 10px 14px; border-radius: 12px; cursor: pointer; box-shadow: var(--shadow); font-size: 14px;
      }
      button.btn-primary {
        background: linear-gradient(135deg, var(--brand), var(--brand-2));
        color: white; border: none;
      }
      main { max-width: 1100px; margin: 18px auto; padding: 0 var(--pad); }

      .grid {
        display: grid; grid-template-columns: repeat( auto-fill, minmax(280px, 1fr) );
        gap: 16px;
      }
      .card {
        background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
        overflow: hidden; transform: translateY(0); transition: transform .2s ease, box-shadow .2s ease;
        box-shadow: var(--shadow);
      }
      .card:hover { transform: translateY(-2px); }
      .card-head {
        background: linear-gradient(135deg, rgba(37,99,235,.12), rgba(124,58,237,.12));
        padding: 14px 16px;
      }
      .title {
        margin: 0; font-weight: 700; font-size: 16px; line-height: 1.3;
        color: var(--text); cursor: pointer;
      }
      .body { padding: 12px 16px; color: var(--muted); font-size: 14px; min-height: 64px; }
      .meta { display: flex; gap: 10px; padding: 12px 16px 16px; }
      .link { text-decoration: none; color: var(--brand); }
      .import { margin-left: auto; }

      .empty, .error, .loading { text-align: center; color: var(--muted); padding: 36px; }

      /* Detail view */
      #detail { display: none; max-width: 900px; margin: 18px auto; padding: 0 var(--pad); }
      .detail-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); }
      .detail-head { padding: 18px; border-bottom: 1px solid var(--border); background: linear-gradient(135deg, rgba(37,99,235,.10), rgba(124,58,237,.10)); }
      .detail-title { margin: 0; font-size: 22px; font-weight: 800; }
      .detail-body { padding: 18px; color: var(--muted); }
      .detail-actions { display: flex; gap: 10px; padding: 0 18px 18px; }
      .back { margin: 0 0 10px 0; }
    </style>
  </head>
  <body>
    <header>
      <div class="toolbar">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.2-4.2M10.8 18a7.2 7.2 0 1 1 0-14.4 7.2 7.2 0 0 1 0 14.4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="search" type="search" placeholder="Search blueprints by title or description…" />
        </div>
        <select id="sort">
          <option value="new">Newest</option>
          <option value="az">A → Z</option>
          <option value="za">Z → A</option>
        </select>
        <button id="refresh" class="btn-primary" title="Refresh list">Refresh</button>
      </div>
    </header>

    <main>
      <div id="loading" class="loading">Loading blueprints…</div>
      <div id="list" class="grid" style="display:none"></div>
      <div id="empty" class="empty" style="display:none">No blueprints matched.</div>
      <div id="error" class="error" style="display:none"></div>
    </main>

    <section id="detail">
      <button class="back" onclick="showList()">← Back</button>
      <div class="detail-card">
        <div class="detail-head"><h2 id="d-title" class="detail-title"></h2></div>
        <div class="detail-body"><p id="d-excerpt"></p></div>
        <div class="detail-actions">
          <a id="d-topic" class="link" target="_blank" rel="noopener">Open forum post</a>
          <a id="d-import" class="link import btn-primary" target="_blank" rel="noopener" style="padding:10px 14px;border-radius:12px;color:#fff;">Import to my Home Assistant</a>
        </div>
      </div>
    </section>

    <script src="./app.js"></script>
  </body>
</html>
