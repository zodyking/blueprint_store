<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Blueprint Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Shoelace -->
    <script type="module"
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/shoelace-autoloader.js">
    </script>

    <!-- Material Web minimal -->
    <script type="module">
      import 'https://esm.run/@material/web@1.0.0/chips/filter-chip.js';
    </script>

    <style>
      /* (your existing styles — unchanged) */
    </style>
  </head>
  <body>
    <header>
      <div class="bar">
        <div class="brand">
          <img src="/blueprint_store_static/images/bps_logo.png" alt="Blueprint Store"/>
          <span>Blueprint Store</span>
        </div>

        <sl-input id="search" placeholder="Search titles (finds every match)..." clearable pill>
          <sl-icon name="search" slot="prefix"></sl-icon>
        </sl-input>

        <sl-select id="sort" value="new" hoist>
          <sl-option value="new">Newest</sl-option>
          <sl-option value="title">Title A–Z</sl-option>
          <sl-option value="likes">Most liked</sl-option>
        </sl-select>

        <sl-dropdown id="tagdd" hoist>
          <sl-button id="tagbtn" slot="trigger" caret class="plain" pill>All tags</sl-button>
          <sl-menu id="tagmenu"></sl-menu>
        </sl-dropdown>

        <sl-button id="refresh" class="plain" pill>Refresh</sl-button>
      </div>
    </header>

    <main>
      <div class="banner"><img src="/blueprint_store_static/images/bps_banner.png" alt="Blueprint Store banner"></div>

      <div class="section-title">All blueprints</div>
      <div id="list" class="cards-wrap"></div>

      <p id="empty" style="display:none">No blueprints matched.</p>
      <p id="error" style="display:none"></p>
      <div id="sentinel"></div>
    </main>

    <!-- dialog for future stats, kept here -->
    <sl-dialog id="statsDialog" label="Blueprint popularity">
      <div id="statsBody">Loading…</div>
      <sl-button slot="footer" variant="primary" onclick="this.closest('sl-dialog').hide()">Close</sl-button>
    </sl-dialog>

    <!-- cache-busted to pick up the new logic -->
    <script src="./app.js?v=restore-cards-2" defer></script>
  </body>
</html>
