<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Blueprint Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Shoelace -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.0/cdn/shoelace-autoloader.js"></script>

  <style>
    :root{
      --blue-1:#0a5bd8; --blue-2:#0d3b8e;
      --ink:#e6f0ff; --muted:#b9c7e6;
      --card-bg: linear-gradient(180deg, rgba(10,20,52,.78), rgba(8,18,46,.80));
      --card-bd: rgba(170,200,255,.22);
      --card-bd-hover:#9dd1ff66;
      --shadow: 0 18px 50px rgba(6,16,50,.45);
      --maxw: 1200px;

      --sl-input-background-color: transparent;
      --sl-input-border-color: rgba(255,255,255,.32);
      --sl-color-neutral-0: rgba(16,34,86,.98);
      --sl-panel-background-color: rgba(16,34,86,.98);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--blue-1), var(--blue-2));
      min-height:100vh;
      position:relative;
    }
    /* blueprint grid lines */
    body::before{
      content:""; position:fixed; inset:0; z-index:-2; pointer-events:none;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.12) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.12) 1px, transparent 1px);
      background-size:28px 28px;
    }

    header{ position:sticky; top:0; z-index:8; backdrop-filter:blur(8px); border-bottom:1px solid #ffffff22; }
    .bar{
      max-width:var(--maxw); margin:0 auto; padding:8px 12px;
      display:grid; grid-template-columns:auto 1fr auto auto auto; gap:10px; align-items:center;
    }
    .brand{ display:flex; gap:10px; align-items:center; font-weight:900; }
    .brand img{ width:28px; height:28px; border-radius:6px; }

    sl-input::part(base){ background:transparent; }
    sl-input::part(input){ color:#fff; }
    sl-button.plain::part(base){ background:transparent; color:#fff; border:none; box-shadow:none; padding-inline:10px; }
    sl-button.plain::part(base):hover{ text-decoration: underline; }
    sl-button.ghost::part(base){ background:transparent; border:none; box-shadow:none; }

    main{ max-width:var(--maxw); margin:12px auto 64px; padding:0 12px; }

    .banner{ margin:8px 0 12px; border-radius:16px; overflow:hidden; box-shadow:var(--shadow); border:1px solid #ffffff22; }
    .banner img{ width:100%; display:block; }

    .cards-wrap{ position:relative; }
    .cards-wrap::before{
      content:""; position:absolute; inset:-34px -18px -34px -18px; z-index:-1;
      background: radial-gradient(60% 55% at 50% 8%, rgba(155,205,255,.18), transparent 60%),
                  radial-gradient(60% 60% at 50% 100%, rgba(40,140,255,.18), transparent 65%);
      filter: blur(18px);
    }

    .section-title{ margin:10px 0 10px; font-size:20px; font-weight:900; letter-spacing:.2px; }

    .card{
      border-radius:18px; border:1px solid var(--card-bd); background:var(--card-bg);
      box-shadow: var(--shadow); padding:16px; margin:14px 0; overflow:visible; position:relative;
    }
    .card:hover{ border-color:var(--card-bd-hover); box-shadow: 0 26px 60px rgba(30,140,255,.30); }
    .row{ display:flex; gap:12px; align-items:baseline; flex-wrap:wrap; }
    .card h3{ margin:0; font-size:18px; font-weight:900; }
    .author{ opacity:.92; font-weight:700; }
    .tags{ display:flex; gap:6px; flex-wrap:wrap; margin:6px 0 10px; }
    .tag{ background:#0e2a66; border:1px solid #29539a; color:#cfe2ff; padding:2px 8px; border-radius:999px; font-size:12px; }

    /* expandable description */
    .desc-wrap{ background: rgba(4,8,22,.65); border:1px solid rgba(160,200,255,.14); border-radius:12px; padding:12px 14px; position:relative; --clamp: 5; }
    .desc{ margin:0; color:var(--ink); line-height:1.55; display:-webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: var(--clamp); overflow:hidden; }
    .desc-wrap.collapsed .grad{ content:""; position:absolute; left:0; right:0; bottom:0; height:56px; border-radius:0 0 12px 12px; background: linear-gradient(180deg, rgba(4,8,22,0), rgba(4,8,22,.85)); pointer-events:none; }
    .toggle{ margin-top:8px; color:#cfe2ff; font-weight:700; cursor:pointer; user-select:none; }

    .meta{ display:flex; align-items:center; gap:8px; position:absolute; left:14px; bottom:14px; }
    .likes-pill{ display:inline-flex; align-items:center; gap:10px; padding:8px 14px; border-radius:999px; border:1px solid rgba(255,255,255,.28); background:rgba(15,45,115,.35); font-weight:800; }
    .heart{ width:18px; height:18px; display:inline-block; mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21s-6.716-4.385-9.428-7.1a5.5 5.5 0 1 1 7.778-7.778L12 4.772l1.65-1.65a5.5 5.5 0 0 1 7.778 7.778C18.716 16.615 12 21 12 21z"/></svg>') center/contain no-repeat; background:#fff; }

    .card__footer{ display:flex; justify-content:flex-end; align-items:center; margin-top:44px; }
    .import-btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; font-weight:800; color:#032149; text-decoration:none; background: linear-gradient(135deg, #00b2ff, #0a84ff); box-shadow: 0 10px 24px rgba(4,96,200,.35), inset 0 1px 0 #fff6; border: 1px solid rgba(255,255,255,.35); }

    /* Creators Spotlight */
    .contrib{ margin:18px 0 22px; padding:16px; border-radius:16px; border:1px solid var(--card-bd); background:var(--card-bg); box-shadow:var(--shadow); }
    .contrib-head{ margin:0 0 10px; color:#aee1ff; font-size:20px; font-weight:900; text-align:center; }
    .contrib-sub{ margin:0 0 12px; opacity:.8; text-align:center; }
    .contrib-grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    @media (max-width: 980px){ .contrib-grid{ grid-template-columns: 1fr; } }
    .contrib-card{ border:1px solid var(--card-bd); background: var(--card-bg); border-radius:14px; padding:16px; display:flex; flex-direction:column; justify-content:flex-start; align-items:center; min-height:120px; text-align:center; }
    .contrib-card h4{ margin:0 0 6px; font-weight:900; }
    .contrib-title{ font-weight:800; margin:8px 0 0; }
    .contrib-chip{ background:#0b1c48; border:1px solid #184a88; padding:6px 9px; border-radius:999px; font-weight:700; margin-top:8px; }

    #error,#empty{ text-align:center; color:#e7eefc; }
    #sentinel{ height:60px; }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="brand">
        <img src="/blueprint_store_static/images/bps_logo.png" alt="Blueprint Store"/>
        <span>Blueprint Store</span>
      </div>

      <sl-input id="search" placeholder="Search titles (finds every match)..." clearable pill>
        <sl-icon name="search" slot="prefix"></sl-icon>
      </sl-input>

      <sl-select id="sort" value="new" hoist>
        <sl-option value="new">Newest</sl-option>
        <sl-option value="title">Title Aâ€“Z</sl-option>
        <sl-option value="likes">Most liked</sl-option>
      </sl-select>

      <sl-dropdown id="tagdd" hoist>
        <sl-button id="tagbtn" slot="trigger" caret class="plain" pill>All tags</sl-button>
        <sl-menu id="tagmenu"></sl-menu>
      </sl-dropdown>

      <sl-button id="refresh" class="plain" pill>Refresh</sl-button>
    </div>
  </header>

  <main>
    <div class="banner"><img src="/blueprint_store_static/images/bps_banner.png" alt="Blueprint Store banner"></div>

    <section id="contrib" class="contrib" style="display:none">
      <h3 class="contrib-head">Creators Spotlight</h3>
      <p class="contrib-sub">Shout-outs to makers moving the community forward.</p>
      <div class="contrib-grid" id="contribGrid"></div>
    </section>

    <div class="section-title" id="headingEl">All blueprints</div>

    <div id="list" class="cards-wrap"></div>
    <p id="empty" style="display:none">No blueprints matched.</p>
    <p id="error" style="display:none"></p>
    <div id="sentinel"></div>
  </main>

  <script src="./app.js?v=spotlight-fix2" defer></script>
</body>
</html>
